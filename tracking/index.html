<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Track Your Shipment | Cordova Courier</title>
  <script>
    async function fetchTrackingData() {
      const trackingNumber = window.location.pathname.split("/").pop();
      const res = await fetch(`https://your-vercel-domain.vercel.app/api/track?tn=${trackingNumber}`);
      const data = await res.json();

      document.getElementById("tracking-info").innerText =
        `Tracking #: ${data.trackingNumber}\nStatus: ${data.status}\nFrom: ${data.origin}\nTo: ${data.destination}`;

      const schema = {
        "@context": "https://schema.org",
        "@type": "ParcelDelivery",
        "trackingNumber": data.trackingNumber,
        "trackingUrl": window.location.href,
        "carrier": {
          "@type": "Organization",
          "name": "Cordova Courier",
          "url": "https://www.cordovacourier.com"
        },
        "deliveryAddress": {
          "@type": "PostalAddress",
          "addressLocality": data.destination.split(",")[0] || "",
          "addressRegion": data.destination.split(",")[1]?.trim() || ""
        },
        "deliveryStatus": {
          "@type": "DeliveryEvent",
          "eventStatus": `https://schema.org/${data.status.replace(/\s+/g, '')}`
        }
      };

      const script = document.createElement('script');
      script.type = 'application/ld+json';
      script.textContent = JSON.stringify(schema);
      document.head.appendChild(script);
    }

    window.onload = fetchTrackingData;
  </script>
</head>
<body>
  <h1>Track Your Shipment (Cordova AI Powered)</h1>
  <pre id="tracking-info">Loading...</pre>

  <hr />

  <h3>Manual Tracking Lookup (Powered by OnTime360)</h3>
  <form name="trForm" method="post" action="https://www.ontime360.com/tracking/trackingresults.aspx" id="trForm">
    <div style="border: solid 1px #FFA94D; padding: 10px; background-color: #FFE5CC; font: 10pt Tahoma, sans-serif; border-radius: 8px;">
      <table>
        <tr>
          <td style="color: #333;">Tracking Number:</td>
        </tr>
        <tr>
          <td>
            <input name="TrackingNumber" type="text" maxlength="50" id="TrackingNumber" style="padding: 6px; border: 1px solid #CCC; border-radius: 4px;" />
            &nbsp;
            <input type="submit" name="btnSubmit" value="Submit" onclick="trForm.target='_blank';" id="btnSubmit" 
                   style="background-color: #FF8800; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;" />
          </td>
        </tr>
        <tr>
          <td>
            <span style="font: 8pt Tahoma, sans-serif; color: #666;">Powered by 
              <a style="text-decoration: none; color: #666;" target="_blank" href="https://www.ontime360.com">OnTime 360</a> Courier Software
            </span>
          </td>
        </tr>
      </table>
      <input type="hidden" name="accid" id="accid" value="M3UXLvzAV1bGHUjZFkFdi42dqdx7YfvdCZg1OYCibTkO0WaiYQaxJg==" />
    </div>
  </form>
</body>
</html>
